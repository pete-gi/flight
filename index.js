(()=>{"use strict";var t;window.FL=((t=class{static registerController(t,e){this.controllers[t]=e,this.controllers[t].beforeInit&&this.controllers[t].beforeInit(),this.registerValueEvents(t),this.registerActions(t),this.registerRefs(t),this.applyDefaultValues(t),this.controllers[t].afterInit&&this.controllers[t].afterInit()}static registerActions(t){document.querySelectorAll(`[${this.actionAttr}]`).forEach((e=>this.registerAction(t,e)))}static registerAction(t,e){const[r,s,i,o]=e.getAttribute(this.actionAttr).split(this.actionSeparator);s===t&&this._applyActionHandler(s,e,r,i,o)}static registerRefs(t){document.querySelectorAll(`[${this.refAttr}]`).forEach((e=>this.registerRef(t,e)))}static registerRef(t,e){const[r,s]=e.getAttribute(this.refAttr).split(this.refSeparator);if(r===t)if(s.includes(this.refsArrayIndicator)){const t=s.replace(this.refsArrayIndicator,"");this.controllers[r][t]||(this.controllers[r][t]=[]),this.controllers[r][t].push(e)}else this.controllers[r][s]=e}static registerValueEvents(t){document.querySelectorAll(`[${this.valueAttr}]`).forEach((e=>this.registerValueEvent(t,e)))}static registerValueEvent(t,e){const[r,s,i]=e.getAttribute(this.valueAttr).split(this.valueSeparator);if(r===t){const t=this;this.controllers[r]=new Proxy(this.controllers[r],{set:(o,a,n)=>(o[a]=n,t._applyEventListener(r,s,i,e),t._dispatchEvent(r,String(a),n),!0),get:(t,e)=>t[String(e)]})}}static _applyActionHandler(t,e,r,s,i){const[o,a]=r.split(this.actionKeySeparator);e.addEventListener(o,(e=>{i&&this._applyEventModifier(e,i),(!a||"key"in e&&e.key.toLowerCase()===a.toLowerCase())&&this.controllers[t][s]()}))}static _applyEventListener(t,e,r,s){window.addEventListener(`${this.prefix}:value:${t}:${e}`,(()=>{s[r]=this.controllers[t][e]}))}static _dispatchEvent(t,e,r){window.dispatchEvent(new CustomEvent(`${this.prefix}:value:${t}:${e}`,{detail:{value:r}}))}static applyDefaultValues(t){for(const e in this.controllers[t])!this.controllers[t].hasOwnProperty(e)||this.controllers[t][e]instanceof Function||this.controllers[t][e]instanceof HTMLElement||this._dispatchEvent(t,e,this.controllers[t][e])}static _applyEventModifier(t,e){switch(e){case"prevent":t.preventDefault();break;case"stop":t.stopPropagation();break;case"stopImmediate":t.stopImmediatePropagation()}}}).prefix="fl",t.actionSeparator=/[:#\?]/,t.actionKeySeparator=/[.]/,t.refSeparator=/#/,t.valueSeparator=/[#:]/,t.refsArrayIndicator="[]",t.refAttr=`${t.prefix}-ref`,t.valueAttr=`${t.prefix}-value`,t.actionAttr=`${t.prefix}-action`,t.controllers={},t)})();